<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dead End Traders - Character Sheet</title>
  <style>
    body { margin:0; font-family: Arial, sans-serif; background:#000; color:#0ff; }
    #container { width:100%; max-width:1200px; margin:20px auto; }
    .tab-buttons { text-align:center; margin-bottom:20px; }
    .tab-buttons button { background:#0ff; color:#000; border:none; padding:10px 20px; margin:5px; cursor:pointer; }
    .tab-buttons button.active { background:#ff0; }
    .tab-content { display:none; position:relative; }
    .tab-content.active { display:block; }
    img.sheet { width:100%; height:auto; display:block; }
    .overlay { position:absolute; color:#0ff; font-size:16px; }
    input, textarea { background:rgba(0,0,0,0.6); color:#0ff; border:1px solid #0ff; padding:4px; }
    .dot { cursor:pointer; width:20px; height:20px; line-height:20px; text-align:center; font-size:18px; display:inline-block; }
    .filled { color:#ff0; }
    .pool-sum { font-weight:bold; margin-left:10px; }
    .bar { width:100%; height:10px; background:#333; border:1px solid #0ff; }
    .bar-fill { height:100%; background:linear-gradient(to right, #0ff, #00f); }
    #avatar { position:absolute; top:5%; left:5%; width:20%; height:80%; object-fit:cover; border:1px solid #0ff; }
    #avatar-input { position:absolute; top:85%; left:5%; width:20%; }
    .skills-column { display:flex; flex-direction:column; }
    .skill-row { margin-bottom:5px; }
  </style>
</head>
<body>

<div id="container">
  <div class="tab-buttons">
    <button onclick="openTab('page1')" class="active">Page 1: Attributes</button>
    <button onclick="openTab('page2')">Page 2: Talents & Inventory</button>
    <button onclick="openTab('page3')">Page 3: Augments</button>
    <button onclick="openTab('page4')">Page 4: Biography</button>
    <button onclick="openTab('page5')">Page 5: Extra Bio</button>
  </div>

  <div id="page1" class="tab-content active">
    <img class="sheet" src="https://raw.githubusercontent.com/Vanoth/Dead-End-Traders-character-sheets/main/CHARACTER%20SHEET%201.png" alt="Page 1">
    
    <!-- Avatar overlay -->
    <img id="avatar" src="" alt="Character Avatar">
    <div id="avatar-input" class="overlay">
      <input type="text" data-key="avatar-url" placeholder="Avatar URL" style="width:100%; margin-bottom:5px;">
      <input type="file" accept="image/*" onchange="handleAvatarUpload(this)">
    </div>
    
    <!-- Name -->
    <div class="overlay" style="top:45%; left:5%; width:20%;">
      <input type="text" data-key="name" placeholder="Name" style="width:100%;">
    </div>
    
    <!-- Titles -->
    <div class="overlay" style="top:50%; left:5%; width:20%;">
      <input type="text" data-key="titles" placeholder="Titles" style="width:100%;">
    </div>
    
    <!-- LV -->
    <div class="overlay" style="top:55%; left:5%; width:10%;">
      <input type="number" data-key="lv" placeholder="LV" style="width:100%;">
    </div>
    
    <!-- Health bar -->
    <div class="overlay" style="top:60%; left:5%; width:20%;">
      <div>Health</div>
      <div class="bar"><div class="bar-fill" id="health-fill" style="width:50%;"></div></div>
      <input type="range" data-key="health" min="0" max="100" value="50" style="width:100%;" oninput="updateBar(this, 'health-fill')">
    </div>
    
    <!-- EXP -->
    <div class="overlay" style="top:15%; left:5%; width:10%;">
      <input type="number" data-key="exp" placeholder="EXP" style="width:100%;">
    </div>
    
    <!-- FAME -->
    <div class="overlay" style="top:10%; left:5%; width:10%;">
      <input type="number" data-key="fame" placeholder="FAME" style="width:100%;">
    </div>
    
    <!-- Kills -->
    <div class="overlay" style="top:48%; left:5%; width:10%;">
      <input type="number" data-key="kills" placeholder="Kills" style="width:100%;">
    </div>
    
    <!-- FatePoint -->
    <div class="overlay" style="top:40%; left:5%; width:10%;">
      <input type="number" data-key="fatepoint" placeholder="FatePoint" style="width:100%;">
    </div>
    
    <!-- Mental Attributes -->
    <div class="overlay" style="top:10%; left:30%; width:40%;">
      <div class="skill-row">Wits <span class="pool-sum" id="wits-sum">0</span></div>
      <span class="dot" data-key="wits1" onclick="toggleDot(this)">○</span><span class="dot" data-key="wits2" onclick="toggleDot(this)">○</span><span class="dot" data-key="wits3" onclick="toggleDot(this)">○</span><span class="dot" data-key="wits4" onclick="toggleDot(this)">○</span><span class="dot" data-key="wits5" onclick="toggleDot(this)">○</span>
      
      <div class="skill-row" style="margin-top:10px;">Perception <span class="pool-sum" id="perc-sum">0</span></div>
      <span class="dot" data-key="perc1" onclick="toggleDot(this)">○</span><span class="dot" data-key="perc2" onclick="toggleDot(this)">○</span><span class="dot" data-key="perc3" onclick="toggleDot(this)">○</span><span class="dot" data-key="perc4" onclick="toggleDot(this)">○</span><span class="dot" data-key="perc5" onclick="toggleDot(this)">○</span>
      
      <div class="skill-row" style="margin-top:10px;">Intelligence <span class="pool-sum" id="int-sum">0</span></div>
      <span class="dot" data-key="int1" onclick="toggleDot(this)">○</span><span class="dot" data-key="int2" onclick="toggleDot(this)">○</span><span class="dot" data-key="int3" onclick="toggleDot(this)">○</span><span class="dot" data-key="int4" onclick="toggleDot(this)">○</span><span class="dot" data-key="int5" onclick="toggleDot(this)">○</span>
      
      <div class="skill-row" style="margin-top:10px;">Charisma <span class="pool-sum" id="char-sum">0</span></div>
      <span class="dot" data-key="char1" onclick="toggleDot(this)">○</span><span class="dot" data-key="char2" onclick="toggleDot(this)">○</span><span class="dot" data-key="char3" onclick="toggleDot(this)">○</span><span class="dot" data-key="char4" onclick="toggleDot(this)">○</span><span class="dot" data-key="char5" onclick="toggleDot(this)">○</span>
      
      <div class="skill-row" style="margin-top:10px;">Manipulation <span class="pool-sum" id="manip-sum">0</span></div>
      <span class="dot" data-key="manip1" onclick="toggleDot(this)">○</span><span class="dot" data-key="manip2" onclick="toggleDot(this)">○</span><span class="dot" data-key="manip3" onclick="toggleDot(this)">○</span><span class="dot" data-key="manip4" onclick="toggleDot(this)">○</span><span class="dot" data-key="manip5" onclick="toggleDot(this)">○</span>
    </div>
    
    <!-- Physical Attributes -->
    <div class="overlay" style="top:40%; left:30%; width:40%;">
      <div class="skill-row">Strength <span class="pool-sum" id="str-sum">0</span></div>
      <span class="dot" data-key="str1" onclick="toggleDot(this)">○</span><span class="dot" data-key="str2" onclick="toggleDot(this)">○</span><span class="dot" data-key="str3" onclick="toggleDot(this)">○</span><span class="dot" data-key="str4" onclick="toggleDot(this)">○</span><span class="dot" data-key="str5" onclick="toggleDot(this)">○</span>
      
      <div class="skill-row" style="margin-top:10px;">Dexterity <span class="pool-sum" id="dex-sum">0</span></div>
      <span class="dot" data-key="dex1" onclick="toggleDot(this)">○</span><span class="dot" data-key="dex2" onclick="toggleDot(this)">○</span><span class="dot" data-key="dex3" onclick="toggleDot(this)">○</span><span class="dot" data-key="dex4" onclick="toggleDot(this)">○</span><span class="dot" data-key="dex5" onclick="toggleDot(this)">○</span>
      
      <div class="skill-row" style="margin-top:10px;">Stamina <span class="pool-sum" id="stam-sum">0</span></div>
      <span class="dot" data-key="stam1" onclick="toggleDot(this)">○</span><span class="dot" data-key="stam2" onclick="toggleDot(this)">○</span><span class="dot" data-key="stam3" onclick="toggleDot(this)">○</span><span class="dot" data-key="stam4" onclick="toggleDot(this)">○</span><span class="dot" data-key="stam5" onclick="toggleDot(this)">○</span>
      
      <div class="skill-row" style="margin-top:10px;">Psionics <span class="pool-sum" id="psio-sum">0</span></div>
      <span class="dot" data-key="psio1" onclick="toggleDot(this)">○</span><span class="dot" data-key="psio2" onclick="toggleDot(this)">○</span><span class="dot" data-key="psio3" onclick="toggleDot(this)">○</span><span class="dot" data-key="psio4" onclick="toggleDot(this)">○</span><span class="dot" data-key="psio5" onclick="toggleDot(this)">○</span>
    </div>
    
    <!-- Talents and Debuffs -->
    <div class="overlay" style="top:5%; left:70%; width:25%; height:20%;">
      <textarea data-key="talents" placeholder="Talents and Debuffs..." style="width:100%; height:100%;"></textarea>
    </div>
  </div>

  <div id="page2" class="tab-content">
    <img class="sheet" src="https://raw.githubusercontent.com/Vanoth/Dead-End-Traders-character-sheets/main/CHARACTER%20SHEET%20inventory2.png" alt="Page 2">
    
    <!-- Left column skills -->
    <div class="overlay skills-column" style="top:5%; left:10%; width:40%;">
      <div class="skill-row">Alertness <span class="pool-sum" id="alert-sum">0</span></div>
      <span class="dot" data-key="alert1" onclick="toggleDot(this)">○</span><span class="dot" data-key="alert2" onclick="toggleDot(this)">○</span><span class="dot" data-key="alert3" onclick="toggleDot(this)">○</span><span class="dot" data-key="alert4" onclick="toggleDot(this)">○</span><span class="dot" data-key="alert5" onclick="toggleDot(this)">○</span>
      
      <!-- Add similar for Art, Athletics, Intimidation, Brawling, Craft, Driving, Firearms, Larceny, Melee, Stealth, Survival, Intimidation, Expression, etc. Adjust margin-top for spacing -->
      <div class="skill-row" style="margin-top:5px;">Art <span class="pool-sum" id="art-sum">0</span></div>
      <span class="dot" data-key="art1" onclick="toggleDot(this)">○</span><span class="dot" data-key="art2" onclick="toggleDot(this)">○</span><span class="dot" data-key="art3" onclick="toggleDot(this)">○</span><span class="dot" data-key="art4" onclick="toggleDot(this)">○</span><span class="dot" data-key="art5" onclick="toggleDot(this)">○</span>
      
      <!-- Continue for all left column skills -->
    </div>
    
    <!-- Right column skills -->
    <div class="overlay skills-column" style="top:5%; left:55%; width:40%;">
      <div class="skill-row">Animal Ken <span class="pool-sum" id="animalken-sum">0</span></div>
      <span class="dot" data-key="animalken1" onclick="toggleDot(this)">○</span><span class="dot" data-key="animalken2" onclick="toggleDot(this)">○</span><span class="dot" data-key="animalken3" onclick="toggleDot(this)">○</span><span class="dot" data-key="animalken4" onclick="toggleDot(this)">○</span><span class="dot" data-key="animalken5" onclick="toggleDot(this)">○</span>
      
      <!-- Add for Etiquette, Insight, Leadership, Cosmology, Performance, Streetwise, Subterfuge, Academics, Finance, Investigation, Medicine, Drugs, Addiction, Drunkenness, Madness, Occult, Politics, Science, Technology -->
    </div>
    
    <!-- Player Inventory -->
    <div class="overlay" style="top:50%; left:5%; width:90%; height:40%;">
      <textarea data-key="inventory" placeholder="Player Inventory..." style="width:100%; height:100%;"></textarea>
    </div>
  </div>

  <div id="page3" class="tab-content">
    <img class="sheet" src="https://raw.githubusercontent.com/Vanoth/Dead-End-Traders-character-sheets/main/back%20fill%20CHARACTER%203.png" alt="Page 3">
    
    <!-- Augments boxes (estimate positions based on image) -->
    <div class="overlay" style="top:10%; left:20%; width:20%;"> <!-- Head box -->
      <textarea data-key="head-augment" placeholder="Head Augment/Injury" style="width:100%; height:50px;"></textarea>
    </div>
    
    <div class="overlay" style="top:15%; left:5%; width:20%;"> <!-- Left shoulder? -->
      <textarea data-key="left-upper" placeholder="Left Upper" style="width:100%; height:50px;"></textarea>
    </div>
    
    <div class="overlay" style="top:20%; left:60%; width:20%;"> <!-- Right hand -->
      <textarea data-key="right-arm" placeholder="Right Arm" style="width:100%; height:50px;"></textarea>
    </div>
    
    <div class="overlay" style="top:40%; left:30%; width:20%;"> <!-- Torso bottom -->
      <textarea data-key="torso" placeholder="Torso" style="width:100%; height:50px;"></textarea>
    </div>
    
    <div class="overlay" style="top:50%; left:10%; width:20%;"> <!-- Left leg -->
      <textarea data-key="left-leg" placeholder="Left Leg" style="width:100%; height:50px;"></textarea>
    </div>
    
    <div class="overlay" style="top:50%; left:50%; width:20%;"> <!-- Right foot -->
      <textarea data-key="right-leg" placeholder="Right Leg" style="width:100%; height:50px;"></textarea>
    </div>
  </div>

  <div id="page4" class="tab-content">
    <img class="sheet" src="https://raw.githubusercontent.com/Vanoth/Dead-End-Traders-character-sheets/main/back%20fill%20bio%204.png" alt="Page 4">
    
    <!-- Planet of Origin -->
    <div class="overlay" style="top:10%; left:10%; width:20%;">
      <input type="text" data-key="planet" placeholder="Planet of Origin" style="width:100%;">
    </div>
    
    <!-- Apparent Age -->
    <div class="overlay" style="top:15%; left:10%; width:10%;">
      <input type="number" data-key="age" placeholder="Apparent Age" style="width:100%;">
    </div>
    
    <!-- Race -->
    <div class="overlay" style="top:15%; left:25%; width:10%;">
      <input type="text" data-key="race" placeholder="Race" style="width:100%;">
    </div>
    
    <!-- Biography textarea -->
    <div class="overlay" style="top:20%; left:10%; width:30%; height:70%;">
      <textarea data-key="biography" placeholder="Biography..." style="width:100%; height:100%;"></textarea>
    </div>
    
    <!-- Motives textarea -->
    <div class="overlay" style="top:10%; left:45%; width:50%; height:80%;">
      <textarea data-key="motives" placeholder="Motives..." style="width:100%; height:100%;"></textarea>
    </div>
  </div>

  <div id="page5" class="tab-content">
    <img class="sheet" src="https://raw.githubusercontent.com/Vanoth/Dead-End-Traders-character-sheets/main/back%20fill%20bio%204%20-%20Copy.png" alt="Page 5">
    <!-- Similar to page4, perhaps for extra notes -->
    <!-- Duplicate overlays if needed, or customize -->
    <div class="overlay" style="top:10%; left:10%; width:20%;">
      <input type="text" data-key="planet-extra" placeholder="Planet of Origin (Extra)" style="width:100%;">
    </div>
    <!-- etc. -->
  </div>

</div>

<script>
// ... (keep the same script from previous version for toggleDot, updateSum, save/load, etc.)
let playerKey = localStorage.getItem('playerName') || prompt('Enter your player name:') || 'default';
localStorage.setItem('playerName', playerKey);
function getStorageKey(key) { return `${playerKey}_${key}`; }

function openTab(tabId) {
  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.tab-buttons button').forEach(el => el.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  event.target.classList.add('active');
}

function toggleDot(el) {
  el.textContent = el.textContent === '○' ? '●' : '○';
  el.classList.toggle('filled');
  saveData(el);
  updateSum(el.closest('.skill-row'));
}

function updateSum(section) {
  const sumEl = section.querySelector('.pool-sum');
  if (sumEl) sumEl.textContent = section.querySelectorAll('.filled').length;
}

function updateBar(input, fillId) {
  document.getElementById(fillId).style.width = `${input.value}%`;
  saveData(input);
}

function handleAvatarUpload(input) {
  const file = input.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = e => {
      document.getElementById('avatar').src = e.target.result;
      localStorage.setItem(getStorageKey('avatar-data'), e.target.result);
    };
    reader.readAsDataURL(file);
  }
}

function saveData(el) {
  const key = getStorageKey(el.dataset.key);
  if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
    localStorage.setItem(key, el.value);
  } else {
    localStorage.setItem(key, el.textContent);
  }
}

window.addEventListener('load', () => {
  document.querySelectorAll('input[data-key], textarea[data-key]').forEach(el => {
    el.value = localStorage.getItem(getStorageKey(el.dataset.key)) || '';
    if (el.type === 'range') updateBar(el, `${el.dataset.key}-fill`);
    el.addEventListener('input', () => saveData(el));
  });
  document.querySelectorAll('.dot').forEach(el => {
    const saved = localStorage.getItem(getStorageKey(el.dataset.key));
    if (saved) {
      el.textContent = saved;
      if (saved === '●') el.classList.add('filled');
    }
    updateSum(el.closest('.skill-row'));
  });
  const avatarUrl = localStorage.getItem(getStorageKey('avatar-url'));
  const avatarData = localStorage.getItem(getStorageKey('avatar-data'));
  document.getElementById('avatar').src = avatarData || avatarUrl || '';
  document.querySelector('[data-key="avatar-url"]').addEventListener('input', e => {
    document.getElementById('avatar').src = e.target.value;
    saveData(e.target);
  });
});

setInterval(() => document.querySelectorAll('input, textarea, .dot').forEach(saveData), 5000);
</script>

</body>
</html>