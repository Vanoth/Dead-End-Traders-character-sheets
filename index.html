<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dead End Traders - Character Sheet</title>
  <style>
    body { margin:0; font-family: Arial, sans-serif; background:#000; color:#0ff; }
    #container { width:100%; max-width:1200px; margin:20px auto; }
    .tab-buttons { text-align:center; margin-bottom:20px; }
    .tab-buttons button { background:#0ff; color:#000; border:none; padding:10px 20px; margin:5px; cursor:pointer; }
    .tab-buttons button.active { background:#ff0; }
    .tab-content { display:none; position:relative; }
    .tab-content.active { display:block; }
    img.sheet { width:100%; height:auto; display:block; }
    .overlay { position:absolute; color:#0ff; font-size:14px; background:rgba(0,0,0,0.4); padding:4px; }
    input, textarea { background:rgba(0,0,0,0.6); color:#0ff; border:1px solid #0ff; padding:4px; font-size:13px; width:100%; box-sizing:border-box; }
    .dot { cursor:pointer; width:18px; height:18px; line-height:18px; text-align:center; font-size:16px; display:inline-block; margin:0 2px; }
    .filled { color:#ff0; }
    .pool-sum { font-weight:bold; margin-left:8px; font-size:12px; }
    .skill-row { margin:6px 0; display:flex; align-items:center; flex-wrap:wrap; }
    .skill-label { min-width:120px; text-align:right; margin-right:8px; }
    #avatar { position:absolute; top:60px; left:60px; width:220px; height:440px; object-fit:cover; }
    #avatar-input { position:absolute; top:510px; left:60px; width:220px; font-size:12px; }
  </style>
</head>
<body>

<div id="container">
  <div class="tab-buttons">
    <button onclick="openTab('page1')" class="active">Page 1: Attributes</button>
    <button onclick="openTab('page2')">Page 2: Talents & Inventory</button>
    <button onclick="openTab('page3')">Page 3: Augments</button>
    <button onclick="openTab('page4')">Page 4: Biography</button>
    <button onclick="openTab('page5')">Page 5: Extra Bio</button>
  </div>

  <!-- Page 1: Main Attributes -->
  <div id="page1" class="tab-content active">
    <img class="sheet" src="https://raw.githubusercontent.com/Vanoth/Dead-End-Traders-character-sheets/main/CHARACTER%20SHEET%201.png" alt="Page 1">

    <!-- Avatar -->
    <img id="avatar" src="" alt="Avatar">
    <div id="avatar-input" class="overlay">
      <input type="text" data-key="avatar-url" placeholder="Avatar URL">
      <input type="file" accept="image/*" onchange="handleAvatarUpload(this)">
    </div>

    <!-- Left sidebar -->
    <div class="overlay" style="top:180px; left:40px; width:180px;">
      <input type="number" data-key="fame" placeholder="FAME">
      <input type="number" data-key="exp" placeholder="EXP">
      <input type="number" data-key="fatepoint" placeholder="FatePoint">
      <input type="text" data-key="name" placeholder="Name">
      <input type="text" data-key="titles" placeholder="Titles">
      <input type="number" data-key="kills" placeholder="Kills">
      <input type="number" data-key="lv" placeholder="LV">
    </div>

    <!-- Health bar -->
    <div class="overlay" style="top:520px; left:40px; width:220px;">
      <input type="range" data-key="health" min="0" max="100" value="50" oninput="updateBar(this, 'health-fill')">
      <div class="bar"><div class="bar-fill" id="health-fill" style="width:50%;"></div></div>
    </div>

    <!-- Mental Attributes -->
    <div class="overlay" style="top:120px; left:300px; width:500px;">
      <div class="skill-row"><span class="skill-label">Wits</span> <span class="dot" data-key="wits1">○</span><span class="dot" data-key="wits2">○</span><span class="dot" data-key="wits3">○</span><span class="dot" data-key="wits4">○</span><span class="dot" data-key="wits5">○</span> <span class="pool-sum" id="wits-sum">0</span></div>
      <div class="skill-row"><span class="skill-label">Perception</span> <span class="dot" data-key="perc1">○</span><span class="dot" data-key="perc2">○</span><span class="dot" data-key="perc3">○</span><span class="dot" data-key="perc4">○</span><span class="dot" data-key="perc5">○</span> <span class="pool-sum" id="perc-sum">0</span></div>
      <div class="skill-row"><span class="skill-label">Intelligence</span> <span class="dot" data-key="int1">○</span><span class="dot" data-key="int2">○</span><span class="dot" data-key="int3">○</span><span class="dot" data-key="int4">○</span><span class="dot" data-key="int5">○</span> <span class="pool-sum" id="int-sum">0</span></div>
      <div class="skill-row"><span class="skill-label">Charisma</span> <span class="dot" data-key="char1">○</span><span class="dot" data-key="char2">○</span><span class="dot" data-key="char3">○</span><span class="dot" data-key="char4">○</span><span class="dot" data-key="char5">○</span> <span class="pool-sum" id="char-sum">0</span></div>
      <div class="skill-row"><span class="skill-label">Manipulation</span> <span class="dot" data-key="manip1">○</span><span class="dot" data-key="manip2">○</span><span class="dot" data-key="manip3">○</span><span class="dot" data-key="manip4">○</span><span class="dot" data-key="manip5">○</span> <span class="pool-sum" id="manip-sum">0</span></div>
    </div>

    <!-- Physical Attributes -->
    <div class="overlay" style="top:380px; left:300px; width:500px;">
      <div class="skill-row"><span class="skill-label">Strength</span> <span class="dot" data-key="str1">○</span><span class="dot" data-key="str2">○</span><span class="dot" data-key="str3">○</span><span class="dot" data-key="str4">○</span><span class="dot" data-key="str5">○</span> <span class="pool-sum" id="str-sum">0</span></div>
      <div class="skill-row"><span class="skill-label">Dexterity</span> <span class="dot" data-key="dex1">○</span><span class="dot" data-key="dex2">○</span><span class="dot" data-key="dex3">○</span><span class="dot" data-key="dex4">○</span><span class="dot" data-key="dex5">○</span> <span class="pool-sum" id="dex-sum">0</span></div>
      <div class="skill-row"><span class="skill-label">Stamina</span> <span class="dot" data-key="stam1">○</span><span class="dot" data-key="stam2">○</span><span class="dot" data-key="stam3">○</span><span class="dot" data-key="stam4">○</span><span class="dot" data-key="stam5">○</span> <span class="pool-sum" id="stam-sum">0</span></div>
      <div class="skill-row"><span class="skill-label">Psionics</span> <span class="dot" data-key="psio1">○</span><span class="dot" data-key="psio2">○</span><span class="dot" data-key="psio3">○</span><span class="dot" data-key="psio4">○</span><span class="dot" data-key="psio5">○</span> <span class="pool-sum" id="psio-sum">0</span></div>
    </div>

    <!-- Talents and Debuffs -->
    <div class="overlay" style="top:120px; left:820px; width:320px; height:300px;">
      <textarea data-key="talents-debuffs" placeholder="Talents and Debuffs" style="width:100%; height:100%;"></textarea>
    </div>
  </div>

  <!-- Page 2: Talents -->
  <div id="page2" class="tab-content">
    <img class="sheet" src="https://raw.githubusercontent.com/Vanoth/Dead-End-Traders-character-sheets/main/CHARACTER%20SHEET%20inventory2.png" alt="Page 2">

    <!-- Talents (left column) -->
    <div class="overlay" style="top:80px; left:60px; width:500px;">
      <div class="skill-row"><span class="skill-label">Alertness</span> <span class="dot" data-key="alertness1">○</span><span class="dot" data-key="alertness2">○</span><span class="dot" data-key="alertness3">○</span><span class="dot" data-key="alertness4">○</span><span class="dot" data-key="alertness5">○</span> <span class="pool-sum" id="alert-sum">0</span></div>
      <div class="skill-row"><span class="skill-label">Art</span> <span class="dot" data-key="art1">○</span><span class="dot" data-key="art2">○</span><span class="dot" data-key="art3">○</span><span class="dot" data-key="art4">○</span><span class="dot" data-key="art5">○</span> <span class="pool-sum" id="art-sum">0</span></div>
      <div class="skill-row"><span class="skill-label">Athletics</span> <span class="dot" data-key="athletics1">○</span><span class="dot" data-key="athletics2">○</span><span class="dot" data-key="athletics3">○</span><span class="dot" data-key="athletics4">○</span><span class="dot" data-key="athletics5">○</span> <span class="pool-sum" id="athletics-sum">0</span></div>
      <div class="skill-row"><span class="skill-label">Brawling</span> <span class="dot" data-key="brawling1">○</span><span class="dot" data-key="brawling2">○</span><span class="dot" data-key="brawling3">○</span><span class="dot" data-key="brawling4">○</span><span class="dot" data-key="brawling5">○</span> <span class="pool-sum" id="brawling-sum">0</span></div>
      <div class="skill-row"><span class="skill-label">Craft</span> <span class="dot" data-key="craft1">○</span><span class="dot" data-key="craft2">○</span><span class="dot" data-key="craft3">○</span><span class="dot" data-key="craft4">○</span><span class="dot" data-key="craft5">○</span> <span class="pool-sum" id="craft-sum">0</span></div>
      <!-- Add remaining left-column talents here -->
    </div>

    <!-- Talents (right column) -->
    <div class="overlay" style="top:80px; left:620px; width:500px;">
      <div class="skill-row"><span class="skill-label">Animal Ken</span> <span class="dot" data-key="animalken1">○</span><span class="dot" data-key="animalken2">○</span><span class="dot" data-key="animalken3">○</span><span class="dot" data-key="animalken4">○</span><span class="dot" data-key="animalken5">○</span> <span class="pool-sum" id="animalken-sum">0</span></div>
      <div class="skill-row"><span class="skill-label">Etiquette</span> <span class="dot" data-key="etiquette1">○</span><span class="dot" data-key="etiquette2">○</span><span class="dot" data-key="etiquette3">○</span><span class="dot" data-key="etiquette4">○</span><span class="dot" data-key="etiquette5">○</span> <span class="pool-sum" id="etiquette-sum">0</span></div>
      <!-- Add remaining right-column talents here -->
    </div>

    <!-- Player Inventory -->
    <div class="overlay" style="top:580px; left:60px; width:1080px; height:300px;">
      <textarea data-key="inventory" placeholder="Player Inventory (items, gear, notes...)" style="width:100%; height:100%;"></textarea>
    </div>
  </div>

  <!-- Page 3: Augments / Body Map -->
  <div id="page3" class="tab-content">
    <img class="sheet" src="https://raw.githubusercontent.com/Vanoth/Dead-End-Traders-character-sheets/main/back%20fill%20CHARACTER%203.png" alt="Page 3">

    <!-- Augment slots (6 boxes on the body diagram) -->
    <div class="overlay" style="top:180px; left:300px; width:240px; height:80px;">
      <textarea data-key="augment-head" placeholder="Head / Brain Augment"></textarea>
    </div>
    <div class="overlay" style="top:300px; left:120px; width:220px; height:80px;">
      <textarea data-key="augment-left-shoulder" placeholder="Left Shoulder / Arm"></textarea>
    </div>
    <div class="overlay" style="top:300px; left:680px; width:220px; height:80px;">
      <textarea data-key="augment-right-arm" placeholder="Right Arm / Hand"></textarea>
    </div>
    <div class="overlay" style="top:480px; left:360px; width:300px; height:100px;">
      <textarea data-key="augment-torso" placeholder="Torso / Core"></textarea>
    </div>
    <div class="overlay" style="top:620px; left:180px; width:220px; height:120px;">
      <textarea data-key="augment-left-leg" placeholder="Left Leg"></textarea>
    </div>
    <div class="overlay" style="top:620px; left:620px; width:220px; height:120px;">
      <textarea data-key="augment-right-leg" placeholder="Right Leg / Foot"></textarea>
    </div>
  </div>

  <!-- Page 4: Biography -->
  <div id="page4" class="tab-content">
    <img class="sheet" src="https://raw.githubusercontent.com/Vanoth/Dead-End-Traders-character-sheets/main/back%20fill%20bio%204.png" alt="Page 4">

    <!-- Planet of Origin -->
    <div class="overlay" style="top:120px; left:80px; width:300px;">
      <input type="text" data-key="planet-origin" placeholder="Planet of Origin">
    </div>

    <!-- Apparent Age & Race (side by side) -->
    <div class="overlay" style="top:180px; left:80px; width:140px;">
      <input type="number" data-key="apparent-age" placeholder="Apparent Age">
    </div>
    <div class="overlay" style="top:180px; left:240px; width:140px;">
      <input type="text" data-key="race" placeholder="Race">
    </div>

    <!-- Biography large box -->
    <div class="overlay" style="top:240px; left:80px; width:400px; height:500px;">
      <textarea data-key="biography" placeholder="Full Biography / Backstory"></textarea>
    </div>

    <!-- Motives large box -->
    <div class="overlay" style="top:120px; left:520px; width:600px; height:620px;">
      <textarea data-key="motives" placeholder="Motives, Goals, Secrets..."></textarea>
    </div>
  </div>

  <!-- Page 5: Extra Bio / Motives variant -->
  <div id="page5" class="tab-content">
    <img class="sheet" src="https://raw.githubusercontent.com/Vanoth/Dead-End-Traders-character-sheets/main/back%20fill%20bio%204%20-%20Copy.png" alt="Page 5">

    <!-- Same structure as Page 4, but you can rename fields or add extras -->
    <div class="overlay" style="top:120px; left:80px; width:300px;">
      <input type="text" data-key="planet-origin-extra" placeholder="Planet of Origin (alt)">
    </div>

    <div class="overlay" style="top:180px; left:80px; width:140px;">
      <input type="number" data-key="apparent-age-extra" placeholder="Apparent Age (alt)">
    </div>

    <div class="overlay" style="top:180px; left:240px; width:140px;">
      <input type="text" data-key="race-extra" placeholder="Race (alt)">
    </div>

    <div class="overlay" style="top:240px; left:80px; width:400px; height:500px;">
      <textarea data-key="biography-extra" placeholder="Extra Biography / Notes"></textarea>
    </div>

    <div class="overlay" style="top:120px; left:520px; width:600px; height:620px;">
      <textarea data-key="motives-extra" placeholder="Extra Motives / Additional Info"></textarea>
    </div>
  </div>

</div>

<script>
// Player namespacing
let playerKey = localStorage.getItem('playerName') || prompt('Enter your player name:') || 'default';
localStorage.setItem('playerName', playerKey);
function getStorageKey(key) { return `${playerKey}_${key}`; }

// Tab switching
function openTab(tabId) {
  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.tab-buttons button').forEach(el => el.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  event.target.classList.add('active');
}

// Toggle dot
function toggleDot(el) {
  el.textContent = el.textContent === '○' ? '●' : '○';
  el.classList.toggle('filled');
  saveData(el);
}

// Update sum (called after load or toggle)
function updateSum(section) {
  const sumEl = section.querySelector('.pool-sum');
  if (sumEl) sumEl.textContent = section.querySelectorAll('.filled').length;
}

// Bar update
function updateBar(input, fillId) {
  document.getElementById(fillId).style.width = `${input.value}%`;
  saveData(input);
}

// Avatar upload
function handleAvatarUpload(input) {
  const file = input.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = e => {
      document.getElementById('avatar').src = e.target.result;
      localStorage.setItem(getStorageKey('avatar-data'), e.target.result);
    };
    reader.readAsDataURL(file);
  }
}

// Save data
function saveData(el) {
  const key = getStorageKey(el.dataset.key);
  if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
    localStorage.setItem(key, el.value);
  } else {
    localStorage.setItem(key, el.textContent);
  }
}

// Load on page open
window.addEventListener('load', () => {
  document.querySelectorAll('input[data-key], textarea[data-key]').forEach(el => {
    el.value = localStorage.getItem(getStorageKey(el.dataset.key)) || '';
    if (el.type === 'range') updateBar(el, `${el.dataset.key}-fill`);
    el.addEventListener('input', () => saveData(el));
  });

  document.querySelectorAll('.dot').forEach(el => {
    const saved = localStorage.getItem(getStorageKey(el.dataset.key));
    if (saved) {
      el.textContent = saved;
      if (saved === '●') el.classList.add('filled');
    }
    updateSum(el.closest('.skill-row'));
  });

  const avatarUrl = localStorage.getItem(getStorageKey('avatar-url'));
  const avatarData = localStorage.getItem(getStorageKey('avatar-data'));
  document.getElementById('avatar').src = avatarData || avatarUrl || '';
  document.querySelector('[data-key="avatar-url"]').addEventListener('input', e => {
    document.getElementById('avatar').src = e.target.value;
    saveData(e.target);
  });
});

// Auto-save every 5 seconds
setInterval(() => {
  document.querySelectorAll('input, textarea, .dot').forEach(saveData);
}, 5000);
</script>

</body>
</html>
